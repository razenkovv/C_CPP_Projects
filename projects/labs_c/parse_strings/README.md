Обработка строк.

Для каждой строки, представляющей собой запись некоторой
математической формулы, проверить ее корректность с точки зрения соответствия
друг другу открывающих и закрывающих круглых и квадратных скобок, а также, в
случае корректности ввода, сформировать новую строку, из которой должна быть
исключена подстрока, ограниченная круглыми скобками максимальной
вложенности.